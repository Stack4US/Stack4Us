/* Global Dark Theme Palette */
:root {
  --color-bg: #0e1116;
  --color-surface: #1b222c;
  --color-surface-alt: #242f3b;
  --color-surface-soft: #1f2732;
  --color-border: #27313f;
  --color-border-strong: #324152;
  --color-accent: #6366f1;
  --color-accent-alt: #8b5cf6;
  --color-accent-hover: #818cf8;
  --color-danger: #ef4444;
  --color-success: #10b981;
  --color-warning: #f59e0b;
  --color-text: #f1f5f9;
  --color-text-dim: #94a3b8;
  --color-text-faint: #64748b;
  --gradient-accent: linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%);
  --radius-xs: 4px;
  --radius-sm: 6px;
  --radius: 10px;
  --radius-lg: 16px;
  --shadow-sm: 0 2px 6px -1px rgba(0,0,0,.4);
  --shadow: 0 8px 24px -6px rgba(0,0,0,.55);
  --transition-base: .25s cubic-bezier(.4,0,.2,1);
  font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', Arial, sans-serif;
}

body.theme-dark {
  background:
    radial-gradient(circle at 12% 18%, rgba(99,102,241,.18), rgba(99,102,241,0) 60%),
    radial-gradient(circle at 85% 70%, rgba(139,92,246,.15), rgba(139,92,246,0) 55%),
    linear-gradient(125deg, #0c0f14 0%, #0d1016 38%, #0b1018 60%, #0e1116 100%);
  position:relative;
  min-height:100vh;
  color: var(--color-text);
  -webkit-font-smoothing: antialiased;
  overflow-x:hidden;
}
body.theme-dark::before {
  content:"";
  position:fixed; inset:0; pointer-events:none;
  background:
    repeating-linear-gradient(45deg, rgba(255,255,255,.015) 0 2px, transparent 2px 6px),
    radial-gradient(circle at 30% 40%, rgba(255,255,255,.05), transparent 70%);
  mix-blend-mode: overlay;
  opacity:.6;
  z-index:0;
}

/* Frosted glass utility */
.glass {
  background: linear-gradient(145deg, rgba(27,34,44,.78), rgba(27,34,44,.55));
  backdrop-filter: blur(18px) saturate(165%);
  -webkit-backdrop-filter: blur(18px) saturate(165%);
  border:1px solid rgba(255,255,255,.05);
  box-shadow:0 28px 60px -24px rgba(0,0,0,.85), 0 0 0 1px rgba(255,255,255,.04) inset;
}
.glass-soft {
  background: linear-gradient(150deg, rgba(34,43,54,.65), rgba(28,35,46,.45));
  backdrop-filter: blur(14px) saturate(150%);
  -webkit-backdrop-filter: blur(14px) saturate(150%);
  border:1px solid rgba(255,255,255,.05);
  box-shadow:0 18px 42px -18px rgba(0,0,0,.75);
}

/* Dashboard shell glass */
body.theme-dark .dashboard-shell { position:relative; z-index:1; }
body.theme-dark .dashboard-shell::before { content:""; position:absolute; inset:0; pointer-events:none; background:linear-gradient(160deg, rgba(99,102,241,.12), rgba(139,92,246,.0) 60%); opacity:.9; }

body.theme-dark ::selection { background: rgba(99,102,241,.35); color: #fff; }

/* Scrollbar */
body.theme-dark::-webkit-scrollbar { width: 12px; }
body.theme-dark::-webkit-scrollbar-track { background: var(--color-bg); }
body.theme-dark::-webkit-scrollbar-thumb { background: var(--color-border); border: 3px solid var(--color-bg); border-radius: 20px; }
body.theme-dark::-webkit-scrollbar-thumb:hover { background: var(--color-border-strong); }

/* Utility surfaces */
.theme-surface { background: var(--color-surface); border: 1px solid var(--color-border); border-radius: var(--radius); box-shadow: var(--shadow-sm); }
.theme-card { background: var(--color-surface-alt); border:1px solid var(--color-border); border-radius: var(--radius-lg); box-shadow: var(--shadow); }

.btn-accent { background: var(--gradient-accent); color:#fff; border:none; border-radius: var(--radius-sm); padding:.75rem 1.25rem; font-weight:600; cursor:pointer; transition: filter .25s; }
.btn-accent:hover { filter: brightness(1.08); }
.btn-outline { background:transparent; color:var(--color-text); border:1px solid var(--color-border); border-radius:var(--radius-sm); padding:.65rem 1rem; cursor:pointer; transition: var(--transition-base); }
.btn-outline:hover { background:var(--color-surface-soft); border-color:var(--color-border-strong); }

.input-base { background:#11161e; border:1px solid var(--color-border); color:var(--color-text); border-radius:var(--radius-sm); padding:.75rem .9rem; width:100%; font:inherit; transition:var(--transition-base); }
.input-base:focus { outline:none; border-color:var(--color-accent); box-shadow:0 0 0 3px rgba(99,102,241,.35); background:#0f141b; }

.text-dim { color:var(--color-text-dim); }
.text-faint { color:var(--color-text-faint); }

/* Elevation helper */
.elevate:hover { box-shadow:0 10px 28px -6px rgba(0,0,0,.55); }

/* Theming legacy variable bridge (map light scheme vars to dark) */
body.theme-dark {
  --c-bg: var(--color-surface);
  --c-border: var(--color-border);
  --c-muted: var(--color-text-dim);
  --c-muted2: var(--color-text-dim);
  --c-primary: var(--color-accent);
  --c-primary-hover: var(--color-accent-hover);
  --c-surface: var(--color-surface-alt);
  --so-accent: var(--color-accent-alt);
  --so-accent-2: var(--color-accent);
  --so-bg-soft: var(--color-surface-soft);
  --so-chip: rgba(99,102,241,.12);
  --so-text-muted: var(--color-text-dim);
  --so-success: var(--color-success);
  --so-danger: var(--color-danger);
  --so-border: var(--color-border);
}

/* Generic text color fix inside legacy cards */
body.theme-dark .card, body.theme-dark .answer-item, body.theme-dark .conversation-item, body.theme-dark .so-item, body.theme-dark .notification-item { color: var(--color-text); }

/* Links */
body.theme-dark a { color: var(--color-accent); }
body.theme-dark a:hover { color: var(--color-accent-hover); }
