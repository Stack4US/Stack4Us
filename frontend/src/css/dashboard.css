/* =====================================================
   Dashboard (mobile-first)
   Order inside rule: layout/box -> spacing -> typography -> visual -> misc
   ===================================================== */
:root {
  /* Spacing scale */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 24px;

  /* Radii */
  --radius-sm: 4px;
  --radius: 8px;
  --radius-lg: 12px;

  /* Palette (light legacy defaults, overridden in theme-dark) */
  --c-bg: #ffffff;
  --c-border: #e2e2e5;
  --c-muted: #666;
  --c-muted2: #8a8d94;
  --c-primary: #3d47d9;
  --c-primary-hover: #3039b0;
  --c-surface: #f7f8fa;

  /* SO theme */
  --so-accent: #8b5cf6;/* override by dark theme */
  --so-accent-2: #6d28d9;/* override by dark theme */
  --so-bg-soft: #f7f7fb;/* override by dark theme */
  --so-chip: #eef2ff;/* override by dark theme */
  --so-text-muted: #6b7280;/* override by dark theme */
  --so-success: #10b981;
  --so-danger: #ef4444;
  --so-border: #e6e6ef;/* override by dark theme */

  /* Shadows */
  --shadow-sm: 0 2px 4px rgba(0,0,0,.04);
  --shadow: 0 4px 14px -4px rgba(0,0,0,.08);

  font-family: system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;
}

body.has-dashboard { background: var(--color-bg, #f2f4f8); }

/* Layout shell */
.dashboard-shell { display:flex; flex-direction:column; min-height:100%; }
.sidebar { order:2; }
.dashboard-main { order:1; }

/* Sidebar / nav (mobile merged) */
.sidebar {
  background: var(--c-bg);
  border-bottom: 1px solid var(--c-border);
  padding: var(--space-3) var(--space-4);
}
.side-nav { display:flex; flex-wrap:wrap; gap:var(--space-3); }
.side-nav a {
  padding: 6px 10px;
  font-size: 13px;
  text-decoration: none;
  border-radius: var(--radius-sm);
  background: var(--c-surface);
  color: var(--color-text, #222);
}
.side-nav a.active { background: var(--c-primary); color:#fff; }

.user-card{
  display:flex; align-items:center; gap:var(--space-3);
  margin-top: var(--space-3); padding: var(--space-2) var(--space-3);
  border:1px solid var(--c-border); border-radius:var(--radius);
  background:var(--c-bg); cursor:pointer;
}
.user-card .avatar{
  width:40px;height:40px;display:flex;align-items:center;justify-content:center;
  border-radius:50%;background:var(--color-surface-soft,#eceef2);font-size:20px;color:var(--color-text,#222);
}
.user-meta{ display:flex; flex-direction:column; line-height:1.2; }
.user-name{ font-size:14px; font-weight:600; }
.user-role{ font-size:11px; text-transform:uppercase; color:var(--c-muted2); }

.dashboard-container{ padding: var(--space-4); }
.dashboard-container h1{ margin: var(--space-2) 0 var(--space-4); font-size:18px; }
.dashboard-container {
  padding: var(--space-5) var(--space-4) var(--space-4);
}
.dashboard-container h1 {
  margin: var(--space-2) 0 var(--space-4);
  font-size: 18px;
}

/* Add wrapper for bell */
.dash-head-with-bell { display:flex; align-items:center; justify-content:space-between; gap:1rem; }
.dash-head-actions { display:flex; align-items:center; gap:.5rem; position:relative; }

/* Stats */
.stats-cards{ display:grid; grid-template-columns:repeat(auto-fit,minmax(100px,1fr)); gap:var(--space-3); margin-bottom:var(--space-5); }
.stats-cards .card{ padding:var(--space-3); background:var(--c-bg); border:1px solid var(--c-border); border-radius:var(--radius); box-shadow:var(--shadow-sm); }
.stats-cards h3{ margin:0 0 4px; font-size:12px; letter-spacing:.5px; text-transform:uppercase; color:var(--c-muted); }
.stat-number{ font-size:20px; font-weight:600; }

/* Create Post */
#post-form.card{ padding:var(--space-4); background:var(--c-bg); border:1px solid var(--c-border); border-radius:var(--radius-lg); box-shadow:var(--shadow-sm); }
.post-grid{ display:flex; flex-direction:column; gap:var(--space-3); }
.post-grid input[type=text], .post-grid textarea, .post-grid select, .post-grid input[type=file]{ width:100%; box-sizing:border-box; padding:8px 10px; font-size:13px; border:1px solid var(--c-border); border-radius:var(--radius-sm); background:var(--color-surface-soft,#f3f3f5); color:var(--color-text,#111); }
.post-grid textarea{ resize:vertical; }
#post-form button[type=submit]{ margin-top:4px; }

/* Enhanced title + file input (dark theme) */
body.theme-dark #post-form.card {
  background: linear-gradient(150deg, rgba(27,34,44,.82), rgba(27,34,44,.65));
  backdrop-filter: blur(14px) saturate(150%);
  -webkit-backdrop-filter: blur(14px) saturate(150%);
  border:1px solid rgba(255,255,255,.05);
  box-shadow:0 20px 46px -24px rgba(0,0,0,.75), 0 0 0 1px rgba(255,255,255,.04) inset;
}
body.theme-dark #post-form.card h1, body.theme-dark #post-form.card h2, body.theme-dark #post-form.card h3 {
  background:linear-gradient(135deg,var(--color-accent),var(--color-accent-alt));
  -webkit-background-clip:text; background-clip:text; color:transparent;
  letter-spacing:.6px;
}
body.theme-dark .post-grid input[type=text] {
  background:rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.06);
  color:var(--color-text);
  border-radius:10px;
  padding:.85rem 1rem;
  font-size:.9rem;
  font-weight:500;
  box-shadow:0 4px 12px -6px rgba(0,0,0,.5) inset;
  transition:.3s border-color,.3s background,.3s box-shadow;
}
body.theme-dark .post-grid input[type=text]:focus {
  outline:none;
  border-color:var(--color-accent);
  box-shadow:0 0 0 3px rgba(99,102,241,.35), 0 4px 14px -6px rgba(0,0,0,.6) inset;
  background:rgba(255,255,255,.07);
}
body.theme-dark .post-grid input[type=file] {
  background:rgba(255,255,255,.05);
  border:1px dashed rgba(255,255,255,.15);
  color:var(--color-text-dim);
  padding:.75rem 1rem;
  font-size:.75rem;
  border-radius:10px;
  cursor:pointer;
  transition:.3s border-color,.3s background,.3s color;
}
body.theme-dark .post-grid input[type=file]:hover {
  background:rgba(255,255,255,.07);
  border-color:var(--color-accent);
  color:var(--color-text);
}
body.theme-dark .post-grid select, body.theme-dark .post-grid textarea {
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.06);
  color:var(--color-text);
  border-radius:10px;
  padding:.75rem .9rem;
  font-size:.8rem;
  transition:.3s border-color,.3s background;
}
body.theme-dark .post-grid textarea:focus, body.theme-dark .post-grid select:focus {
  outline:none;
  border-color:var(--color-accent);
  background:rgba(255,255,255,.06);
  box-shadow:0 0 0 3px rgba(99,102,241,.28);
}
/* === Fancy Select Component (replaces native) === */
body.theme-dark #post-form .fancy-select { position:relative; width:100%; font-size:.8rem; }
body.theme-dark #post-form .fancy-select .fs-trigger {
  width:100%; text-align:left; border:1px solid rgba(255,255,255,.08);
  background:linear-gradient(150deg, rgba(34,43,55,.7), rgba(28,35,46,.55));
  color:var(--color-text); padding:.95rem 1.05rem; border-radius:14px; font:500 .85rem/1.1 'Inter',system-ui,sans-serif;
  letter-spacing:.4px; cursor:pointer; position:relative;
  display:flex; align-items:center; gap:.65rem; backdrop-filter:blur(10px) saturate(150%);
  box-shadow:0 4px 20px -10px rgba(0,0,0,.7),0 0 0 1px rgba(255,255,255,.05) inset;
  transition:.35s border-color,.35s background,.35s box-shadow,.35s filter;
}
body.theme-dark #post-form .fancy-select .fs-trigger:after {
  content:"▾"; margin-left:auto; font-size:.8rem; color:var(--color-accent); line-height:1; transition:.35s transform; filter:drop-shadow(0 2px 4px rgba(0,0,0,.5));
}
body.theme-dark #post-form .fancy-select.open .fs-trigger:after { transform:rotate(180deg); }
body.theme-dark #post-form .fancy-select .fs-trigger:focus { outline:none; border-color:var(--color-accent); box-shadow:0 0 0 4px rgba(99,102,241,.28),0 6px 26px -12px rgba(0,0,0,.85); }
body.theme-dark #post-form .fancy-select.open .fs-trigger { border-color:var(--color-accent); filter:brightness(1.04); }
body.theme-dark #post-form .fancy-select .fs-options {
  list-style:none; margin:4px 0 0; padding:6px; position:absolute; left:0; right:0; top:100%; z-index:40;
  background:linear-gradient(155deg, rgba(27,34,44,.92), rgba(27,34,44,.78));
  border:1px solid rgba(255,255,255,.08); border-radius:16px; box-shadow:0 24px 60px -20px rgba(0,0,0,.85),0 0 0 1px rgba(255,255,255,.04) inset; backdrop-filter:blur(18px) saturate(180%);
  max-height:270px; overflow:auto; display:none;
  animation:fsFade .35s ease;
}
body.theme-dark #post-form .fancy-select.open .fs-options { display:block; }
body.theme-dark #post-form .fancy-select .fs-options li {
  padding:.65rem .85rem; border-radius:12px; font-size:.75rem; letter-spacing:.5px; font-weight:500; cursor:pointer; position:relative; color:var(--color-text-dim); transition:.3s background,.3s color,.3s letter-spacing;
}
body.theme-dark #post-form .fancy-select .fs-options li.selected { background:rgba(99,102,241,.18); color:var(--color-accent); letter-spacing:.6px; }
body.theme-dark #post-form .fancy-select .fs-options li:hover { background:rgba(99,102,241,.22); color:var(--color-text); }
body.theme-dark #post-form .fancy-select .fs-options li:active { background:rgba(99,102,241,.3); }
body.theme-dark #post-form .fancy-select .fs-options::-webkit-scrollbar { width:10px; }
body.theme-dark #post-form .fancy-select .fs-options::-webkit-scrollbar-track { background:rgba(15,20,27,.6); border-radius:0 0 12px 12px; }
body.theme-dark #post-form .fancy-select .fs-options::-webkit-scrollbar-thumb { background:rgba(99,102,241,.3); border-radius:20px; border:2px solid rgba(15,20,27,.6); }
body.theme-dark #post-form .fancy-select .fs-options::-webkit-scrollbar-thumb:hover { background:rgba(99,102,241,.45); }
@keyframes fsFade { from { opacity:0; transform:translateY(-4px); } to { opacity:1; transform:translateY(0); } }

@media (prefers-reduced-motion:reduce){
  body.theme-dark #post-form .fancy-select .fs-options { animation:none; }
  body.theme-dark #post-form .fancy-select .fs-trigger { transition:none; }
}
body.theme-dark #post-form button[type=submit]{
  background:linear-gradient(135deg,var(--color-accent),var(--color-accent-alt));
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 6px 16px -6px rgba(0,0,0,.65),0 0 0 1px rgba(255,255,255,.05) inset;
  font-weight:600;
  letter-spacing:.4px;
  padding:.75rem 1.4rem;
  border-radius:12px;
  transition:.3s filter,.3s transform;
}
body.theme-dark #post-form button[type=submit]:hover{ filter:brightness(1.08); transform:translateY(-2px); }

/* Buttons */
button{ cursor:pointer; padding:8px 16px; font-size:13px; font-weight:500; color:#fff; background:var(--c-primary); border:none; border-radius:var(--radius-sm); transition:.18s background; }
button:hover{ background:var(--c-primary-hover); }
button:disabled{ background:#9aa0c9; cursor:not-allowed; }

/* Generic .btn API (used in Finder modal) */
.btn{ padding:8px 14px; border-radius:12px; border:1px solid var(--c-border); background:var(--c-bg); color:var(--color-text,#111); }
.btn-primary{ border:none; background:linear-gradient(180deg,var(--so-accent),var(--so-accent-2)); color:#fff; }
.btn-primary:hover{ filter:brightness(1.05); }

/* Posts list */
.stack{ display:flex; flex-direction:column; gap:var(--space-4); }
.card{ padding:var(--space-3); background:var(--c-bg); border:1px solid var(--c-border); border-radius:var(--radius); box-shadow:var(--shadow-sm); }
.card h4{ margin:0 0 4px; font-size:14px; }
.card p{ margin:0; font-size:12px; line-height:1.4; }
.post-actions{ display:flex; gap:6px; margin-top:6px; }
.post-actions button{ padding:4px 10px; font-size:11px; }
.answers-wrap{ display:flex; flex-direction:column; gap:4px; margin-top:6px; }

.answer-item{ position:relative; padding:8px 10px; background:var(--color-surface-soft,#f7f7f9); border:1px solid var(--c-border); border-radius:6px; font-size:12px; }
.answer-item:hover{ border-color:var(--color-border-strong,#d0d2d8); }
.answer-item .rating-slot{ margin-top:4px; }
@media (max-width:600px){ .answer-item .ig-actions-row{ flex-wrap:wrap; } .answer-item .rating-slot{ order:3; width:100%; margin-left:0; } }

.answer-form{ display:flex; gap:6px; margin-top:6px; }
.answer-form input{ flex:1; padding:6px 8px; font-size:12px; border:1px solid var(--c-border); border-radius:var(--radius-sm); background:var(--color-surface-soft,#f3f3f5); color:var(--color-text,#111); }
.answer-form button{ padding:6px 10px; font-size:12px; }

/* Conversations */
.conversation-thread{ margin:6px 0 6px 10px; display:flex; flex-direction:column; gap:4px; padding-left:10px; border-left:2px solid var(--c-border); }
.conversation-item{ background:var(--c-bg); border:1px solid var(--c-border); padding:6px 8px; border-radius:5px; font-size:11px; line-height:1.3; }
.conversation-item.is-directed{ border-color:rgba(99,102,241,.55); background:rgba(99,102,241,.15); }
.conversation-item .mention{ color:var(--c-primary); font-weight:600; }
.ig-comment{ padding:6px 4px 2px; background:transparent; border:none; }
.ig-comment-line{ font-size:12px; line-height:1.35; }
.ig-user{ font-weight:600; margin-right:4px; }
.ig-text{ white-space:pre-wrap; }
.ig-actions-row{ display:flex; gap:12px; margin:2px 0 4px; }
.ig-action{ background:transparent; border:none; color:var(--c-muted2); font-size:11px; padding:2px 0; cursor:pointer; }
.ig-action:hover{ color:var(--color-text,#111); }
.ig-replies{ margin-left:14px; display:flex; flex-direction:column; gap:4px; }

.reply-trigger{ background:transparent; color:var(--c-primary); border:none; font-size:11px; padding:2px 6px; cursor:pointer; border-radius:4px; }
.reply-trigger:hover{ background:rgba(99,102,241,.15); }
.conversation-form{ display:flex; align-items:center; gap:6px; margin:6px 0 4px 10px; padding:6px 8px; background:var(--color-surface-soft,#eef0f7); border:1px dashed var(--c-border); border-radius:6px; }
.conversation-form .reply-context{ font-size:11px; color:var(--c-muted); margin-right:6px; }
.conversation-form input{ flex:1; padding:6px 8px; font-size:11px; border:1px solid var(--c-border); border-radius:4px; background:var(--c-bg); color:var(--color-text,#111); }
.conversation-form button{ padding:6px 10px; font-size:12px; background:var(--c-primary); color:#fff; border:none; border-radius:4px; }
.conversation-form button:hover{ background:var(--c-primary-hover); }
.conversation-form:focus-within{ box-shadow:0 0 0 2px rgba(93,103,205,.25); }

/* Post image area */
.post-card{ padding:var(--space-4); background-color: rgba(94,103,205,0.12); }
.post-meta{ margin:4px 0 6px; font-size:12px; color:var(--c-muted); }
.post-desc{ margin:0 0 8px; }
.post-image-box{ position:relative; width:100%; height:180px; display:flex; align-items:center; justify-content:center; margin:4px 0 8px; font-size:12px; color:var(--c-muted); background:var(--color-surface-soft,#dedfe2); border:1px dashed var(--c-border); border-radius:var(--radius); overflow:hidden; }
.post-image-box img{ width:100%; height:100%; object-fit:contain; display:block; background:var(--c-bg); }
.post-image-box.is-empty{ font-weight:500; letter-spacing:1px; }
.post-image-box.is-error{ background:#f4d7d7; color:#a33; }
@media (min-width:900px){ .post-image-box{ height:220px; } }

/* Lightbox */
body.lightbox-open{ overflow:hidden; }
#img-lightbox-root{ position:fixed; inset:0; z-index:400; pointer-events:none; opacity:0; transition:.25s opacity; }
#img-lightbox-root.is-open{ opacity:1; pointer-events:auto; }
.img-lightbox-backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.72); display:flex; align-items:center; justify-content:center; padding:32px 24px; }
.img-lightbox-figure{ position:relative; margin:0; max-width:95vw; max-height:95vh; display:flex; flex-direction:column; gap:8px; }
.img-lightbox-img{ max-width:100%; max-height:85vh; object-fit:contain; border-radius:8px; box-shadow:0 4px 30px -6px rgba(0,0,0,.5); background:#111; }
.img-lightbox-caption{ font-size:13px; color:#eee; text-align:center; font-weight:500; }
.img-lightbox-close{ position:absolute; top:-14px; right:-14px; background:var(--c-bg); color:var(--color-text,#222); width:34px; height:34px; border-radius:50%; border:1px solid var(--c-border); font-size:20px; line-height:1; cursor:pointer; box-shadow:0 2px 8px rgba(0,0,0,.4); }
.img-lightbox-close:hover{ background:var(--color-surface-soft,#f2f2f2); }

/* Recent answers */
.recent-activity { margin-top: var(--space-5); }
.recent-activity h2 { margin: 0 0 var(--space-3); font-size: 16px; }
.list { display: flex; flex-direction: column; gap: var(--space-3); }

/* Notifications */
.notification-item { display:flex; align-items:flex-start; gap:12px; padding:12px; border:1px solid var(--c-border); border-radius:8px; background:var(--c-bg); position:relative; }
.notification-item.is-unread { border-color: var(--c-primary); background: rgba(99,102,241,.12); }
.notification-item .notif-msg { margin:0 0 4px; font-size:13px; line-height:1.35; }
.notification-item .notif-date { font-size:11px; color:var(--c-muted); }
.notification-item .btn-mark { margin-left:auto; background:var(--c-primary); border:none; color:#fff; padding:4px 8px; font-size:11px; border-radius:4px; cursor:pointer; }
.notification-item .btn-mark:hover { background:var(--c-primary-hover); }

/* Desktop layout */
@media (min-width:900px){ .dashboard-shell{ flex-direction:row; } .sidebar{ width:240px; min-height:100vh; border-right:1px solid var(--c-border); border-bottom:none; display:flex; flex-direction:column; } .sidebar-scroll{ flex:1; overflow-y:auto; } .user-card{ margin-top:auto; } .dashboard-main{ flex:1; } .dashboard-container{ max-width:1000px; margin:0 auto; padding:32px 48px; } .dashboard-container h1{ font-size:26px; } .stats-cards{ grid-template-columns:repeat(3,1fr); } .stack{ gap:var(--space-3); } }

/* === Enhanced Dashboard Glass Effect & Post Highlight === */
body.theme-dark .dashboard-container {
  position: relative;
  background: linear-gradient(145deg, rgba(27,34,44,.72), rgba(27,34,44,.55) 40%, rgba(27,34,44,.35));
  backdrop-filter: blur(22px) saturate(165%);
  -webkit-backdrop-filter: blur(22px) saturate(165%);
  border: 1px solid var(--color-border, #27313f);
  border-radius: 28px;
  box-shadow: 0 40px 80px -32px rgba(0,0,0,.85), 0 0 0 1px rgba(255,255,255,0.04) inset;
  padding: clamp(1.5rem, 2.5vw, 3.25rem) clamp(1.2rem, 2.2vw, 2.75rem) clamp(2.4rem, 3vw, 3.8rem);
}
body.theme-dark .dashboard-container:before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: radial-gradient(circle at 18% 20%, rgba(99,102,241,.18), transparent 65%), radial-gradient(circle at 82% 75%, rgba(139,92,246,.12), transparent 60%);
  pointer-events: none;
  mix-blend-mode: screen;
  opacity: .85;
}

/* Posts wrapper spacing if not already controlled */
body.theme-dark #posts { display:flex; flex-direction:column; gap: 34px; }

body.theme-dark .post-card {
  background: linear-gradient(165deg, rgba(38,47,59,.88), rgba(30,39,49,.72));
  backdrop-filter: blur(14px) saturate(160%);
  -webkit-backdrop-filter: blur(14px) saturate(160%);
  border: 1px solid rgba(255,255,255,0.04);
  border-radius: 22px;
  box-shadow: 0 16px 38px -18px rgba(0,0,0,.9), 0 4px 18px -6px rgba(0,0,0,.55), 0 0 0 1px rgba(255,255,255,0.04) inset;
  position: relative;
  overflow: hidden;
  transition: box-shadow .4s cubic-bezier(.4,0,.2,1), transform .45s cubic-bezier(.4,0,.2,1), border-color .4s;
}
body.theme-dark .post-card:before {
  content: "";
  position:absolute; inset:0;
  background: linear-gradient(120deg, rgba(99,102,241,.28), rgba(139,92,246,.0) 55%);
  opacity: .55;
  pointer-events:none;
}
body.theme-dark .post-card:after {
  content:""; position:absolute; inset:0; border-radius:inherit;
  background: linear-gradient(140deg, rgba(255,255,255,.08), rgba(255,255,255,0) 60%);
  mix-blend-mode: overlay;
  opacity:.4; pointer-events:none;
}
body.theme-dark .post-card:hover {
  transform: translateY(-6px) scale(1.015);
  box-shadow: 0 30px 60px -25px rgba(0,0,0,.9), 0 18px 38px -12px rgba(0,0,0,.55), 0 0 0 1px rgba(99,102,241,.35);
  border-color: rgba(99,102,241,.45);
}
body.theme-dark .post-card h4 {
  font-size: 1.05rem;
  margin-top: 0;
  background: linear-gradient(135deg,var(--color-accent,#6366f1),var(--color-accent-alt,#8b5cf6));
  -webkit-background-clip: text; background-clip:text; color: transparent;
  letter-spacing: .4px;
}
body.theme-dark .post-card .post-meta { color: var(--color-text-dim,#94a3b8); font-size:.7rem; letter-spacing:.5px; text-transform:uppercase; }
body.theme-dark .post-card .post-desc { font-size:.85rem; line-height:1.45; color: var(--color-text,#e2e8f0); }
body.theme-dark .post-card .post-actions button { background: rgba(99,102,241,.15); color: var(--color-accent,#818cf8); border:1px solid rgba(99,102,241,.35); padding: .45rem .9rem; font-size:.7rem; border-radius: 10px; letter-spacing:.5px; font-weight:600; backdrop-filter: blur(6px); }
body.theme-dark .post-card .post-actions button:hover { background: rgba(99,102,241,.25); }

/* Answers section subtle separation */
body.theme-dark .post-card .answers-section { margin-top: 14px; padding: 14px 14px 6px; background: rgba(15,20,27,.55); border:1px solid rgba(255,255,255,0.04); border-radius: 16px; backdrop-filter: blur(10px) saturate(150%); }
body.theme-dark .post-card .answer-item { background: rgba(44,55,69,.55); border:1px solid rgba(255,255,255,0.05); backdrop-filter: blur(6px); }
body.theme-dark .post-card .answer-item:hover { border-color: rgba(99,102,241,.35); }
body.theme-dark .post-card .conversation-item { background: rgba(30,39,49,.6); border-color: rgba(255,255,255,0.06); }
body.theme-dark .post-card .conversation-item.is-directed { background: rgba(99,102,241,.18); border-color: rgba(99,102,241,.45); }

/* Toggle button styling */
body.theme-dark .post-card .answers-toggle { margin-top: 10px; background: rgba(99,102,241,.18); border:1px solid rgba(99,102,241,.4); color: var(--color-accent,#8b5cf6); padding:.5rem .9rem; font-size:.7rem; border-radius: 999px; cursor:pointer; font-weight:600; letter-spacing:.5px; transition:.3s background, .3s border-color; backdrop-filter: blur(6px); }
body.theme-dark .post-card .answers-toggle:hover { background: rgba(99,102,241,.28); border-color: rgba(99,102,241,.55); }

/* Image box tweak */
body.theme-dark .post-card .post-image-box { background: rgba(15,20,27,.75); border:1px solid rgba(255,255,255,0.06); }
body.theme-dark .post-card .post-image-box.is-empty { background: rgba(99,102,241,.1); color: var(--color-accent-alt,#8b5cf6); }

/* Utilities */
.hidden{ display:none !important; }
.hint{ font-size:11px; color:var(--c-muted); }

/* Rating stars */
.rating{ display:inline-flex; align-items:center; gap:2px; }
.star{ font-size:22px; line-height:1; cursor:pointer; user-select:none; transition: color .15s ease, transform .15s ease; color:#636d7a; text-shadow:0 0 1px rgba(0,0,0,.25); }
.star.filled{ color:var(--so-accent); text-shadow:0 0 2px rgba(0,0,0,.25); }
.star.empty{ color:#636d7a; }
.star:hover{ color:var(--so-accent-2); transform:scale(1.08); }
.star:active{ transform:scale(.9); }

/* Avatar helpers in threads */
.ig-user-avatar-wrap{ display:inline-flex; width:28px; height:28px; border-radius:50%; overflow:hidden; margin-right:6px; vertical-align:middle; flex-shrink:0; background:var(--color-surface-soft,#eee); align-items:center; justify-content:center; box-shadow:0 0 0 1px var(--c-border); }
.ig-avatar{ width:100%; height:100%; object-fit:cover; display:block; border-radius:50%; }

/* ================================
   Stack Overflow Finder — styles
   ================================ */

/* (Legacy inline box style kept if ever used) */
.so-box{
  padding:16px 18px; border-radius:14px;
  background:linear-gradient(180deg,#ffffff,#fafaff);
  box-shadow:0 10px 25px rgba(0,0,0,.06), 0 1px 0 rgba(0,0,0,.03) inset;
  border:1px solid var(--so-border);
}

/* Finder form + results (used also inside modal) */
.so-form{ margin-top:4px; margin-bottom:12px; }
.so-fields{
  display:grid; grid-template-columns:1fr 280px auto auto; gap:10px;
}
@media (max-width:900px){ .so-fields{ grid-template-columns:1fr; } }

.so-input{
  width:100%; padding:12px 14px; background:var(--so-bg-soft);
  border:1px solid var(--so-border); border-radius:12px; outline:none;
  transition:border-color .15s, box-shadow .15s, background .15s; font-size:14px;
}
.so-input:focus{ border-color:var(--so-accent); background:#fff; box-shadow:0 0 0 3px rgba(139,92,246,.13); }

.so-limit{
  display:flex; align-items:center; gap:8px; background:#fff; border:1px solid var(--so-border);
  border-radius:12px; padding:8px 10px; font-size:13px; color:#111827;
}
.so-limit select{ border:none; background:transparent; outline:none; font-weight:600; }
.so-submit{
  background:linear-gradient(180deg,var(--so-accent),var(--so-accent-2));
  color:#fff; border:none; padding:10px 16px; border-radius:12px; font-weight:600; letter-spacing:.2px;
  cursor:pointer; transition:filter .12s, transform .08s;
}
.so-submit:hover{ filter:brightness(1.03); transform:translateY(-1px); }

.so-results-wrap{ border-top:1px dashed var(--so-border); padding-top:12px; }
.so-results{ display:grid; grid-template-columns:1fr; gap:12px; }

.so-item{
  --_pad:14px; background:#fff; border:1px solid var(--so-border); border-radius:14px;
  padding:var(--_pad); transition:box-shadow .18s, transform .06s, border-color .12s;
  display:grid; grid-template-columns:1fr auto; align-items:start; gap:10px;
}
.so-item:hover{ border-color:rgba(139,92,246,.45); box-shadow:0 10px 22px rgba(139,92,246,.15); transform:translateY(-1px); }

.so-title{ margin:0 0 6px; font-size:15px; line-height:1.35; }
.so-title a{ color:#111827; text-decoration:none; border-bottom:2px solid transparent; transition:color .12s, border-color .12s; }
.so-title a:hover{ color:var(--so-accent-2); border-color:rgba(139,92,246,.35); }

.so-meta{ display:flex; flex-wrap:wrap; gap:8px 10px; align-items:center; color:var(--so-text-muted); font-size:12px; }
.so-badges{ display:inline-flex; gap:8px; align-items:center; }
.so-badge{
  background:var(--so-chip); border:1px solid rgba(139,92,246,.25); color:#4f46e5;
  font-weight:600; font-size:12px; padding:4px 8px; border-radius:999px; display:inline-flex; align-items:center; gap:6px;
}
.so-score{ color:#111827; font-weight:700; }
.so-answers-count{ color:var(--so-success); font-weight:700; }
.so-answers-count.is-zero{ color:var(--so-danger); }

.so-owner{ display:inline-flex; gap:6px; align-items:center; }
.so-owner img{ width:18px; height:18px; border-radius:50%; object-fit:cover; }

.so-tags{ display:flex; flex-wrap:wrap; gap:6px; }
.so-tag{
  font-size:11px; padding:4px 8px; border-radius:8px; background:#f1f5f9; color:#334155; border:1px solid #e2e8f0;
}

.so-footnote{ margin-top:8px; color:var(--so-text-muted); text-align:right; }

.so-empty{
  padding:14px; border:1px dashed var(--so-border); border-radius:12px; background:#fff;
  color:var(--so-text-muted); text-align:center; font-size:13px;
}

/* Quick buttons in header (legacy) */
.so-btn{
  appearance:none; border:1px solid var(--so-border); background:#fff; color:#111827;
  padding:8px 10px; font-size:13px; border-radius:10px; cursor:pointer;
  transition:transform .08s, box-shadow .16s, border-color .16s;
}
.so-btn:hover{ border-color:var(--so-accent); box-shadow:0 6px 14px rgba(139,92,246,.18); transform:translateY(-1px); }
.so-counter{ color:var(--so-text-muted); font-size:12px; }

/* ================================
   FAB + Modal for Stack Overflow
   ================================ */

/* Floating Action Button */
.fab{
  position:fixed; right:22px; bottom:22px; z-index:500;
  width:64px; height:64px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  background:linear-gradient(180deg,var(--so-accent),var(--so-accent-2));
  border:1px solid rgba(0,0,0,.06);
  box-shadow:0 12px 24px rgba(107,33,168,.28), 0 2px 4px rgba(0,0,0,.1);
  transition:transform .12s ease, box-shadow .18s ease, filter .12s ease;
}
.fab:hover{ transform:translateY(-2px); filter:brightness(1.05); }
.fab:active{ transform:translateY(0); }
.fab img{ width:34px; height:34px; display:block; }

/* Modal backdrop + card */
.so-modal-backdrop{
  position:fixed; inset:0; z-index:600; background:rgba(17,24,39,.55);
  backdrop-filter: blur(2px);
  opacity:0; pointer-events:none; transition:.18s opacity;
}
.so-modal-backdrop.is-open{ opacity:1; pointer-events:auto; }
.so-modal-card{
  width:min(980px, calc(100vw - 32px));
  margin:6vh auto; max-height:86vh; overflow:auto;
  background:#fff; border:1px solid var(--so-border); border-radius:16px;
  box-shadow:0 24px 60px rgba(0,0,0,.22);
  padding:18px 18px 10px;
  transform:translateY(12px) scale(.98); transition:.18s transform;
}
.so-modal-backdrop.is-open .so-modal-card{ transform:none; }

.so-modal-title{ margin:2px 36px 10px 6px; font-size:18px; }
.so-modal-close{
  position:sticky; float:right; top:0; margin-left:auto;
  width:36px; height:36px; border-radius:50%; border:1px solid var(--so-border);
  background:#fff; color:#111; font-size:20px; line-height:1; cursor:pointer;
  box-shadow:var(--shadow-sm);
}
.so-modal-close:hover{ background:#f7f7fb; }

/* Finder inside modal */
.so-finder{ padding:6px 6px 12px; background:#fff; border-radius:12px; }
.so-toolbar{
  display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin-top:10px;
}
.so-chip{
  display:inline-flex; align-items:center; gap:6px;
  padding:7px 10px; border-radius:999px; background:var(--so-chip);
  border:1px solid rgba(139,92,246,.25); color:#4f46e5; font-weight:600; font-size:12px;
}
.so-chip input{ accent-color: var(--so-accent); }

/* Body lock when modal is open */
body.so-modal-open{ overflow:hidden; }

/* FAB oculto por defecto */
.fab { display: none !important; }

/* Mostrarlo solo cuando el body tenga la marca del dashboard */
body.has-dashboard .fab { display: flex !important; }

.post-author-avatar{
  width:32px; height:32px; border-radius:50%; object-fit:cover; display:inline-block; vertical-align:middle; margin-right:6px; box-shadow:0 0 0 1px #e2e8f0;
}
.post-author{ display:inline-flex; align-items:center; gap:4px; font-weight:600; }

/* Hide duplicate sidebar bar on mobile/tablet (use hamburger menu instead) */
@media (max-width:1100px){
  .dashboard-shell .sidebar{ display:none !important; }
  .dashboard-shell { padding-top:0; }
}

/* === Title & File input aesthetic upgrade === */
/* === Fancy Floating Title Field === */
body.theme-dark #post-form .title-field {
  position:relative;
  display:flex;
  align-items:center;
  width:100%;
  isolation:isolate;
}
body.theme-dark #post-form .title-field input {
  width:100%;
  border:1px solid rgba(255,255,255,.07);
  background:linear-gradient(160deg,rgba(255,255,255,.06),rgba(255,255,255,.035)) padding-box;
  color:var(--color-text);
  font-size:1rem;
  font-weight:500;
  letter-spacing:.35px;
  padding:1.1rem 1.15rem .9rem 3.05rem; /* left space for icon */
  border-radius:18px;
  line-height:1.2;
  backdrop-filter:blur(6px) saturate(140%);
  -webkit-backdrop-filter:blur(6px) saturate(140%);
  box-shadow:0 4px 22px -10px rgba(0,0,0,.7), 0 0 0 1px rgba(255,255,255,.04) inset;
  transition:.4s border-color,.4s box-shadow,.4s background,.4s filter;
}
body.theme-dark #post-form .title-field input::placeholder { color:transparent; }
body.theme-dark #post-form .title-field label {
  position:absolute; left:3rem; top:50%; translate:0 -50%;
  font-size:.85rem; letter-spacing:.5px; font-weight:500; color:var(--color-text-dim);
  pointer-events:none; transition:.4s transform,.4s top,.4s left,.4s font-size,.4s color,.4s letter-spacing;
  background:linear-gradient(135deg,var(--color-accent),var(--color-accent-alt));
  background-clip:text; -webkit-background-clip:text; color:transparent; filter:brightness(.85) saturate(.9);
}
body.theme-dark #post-form .title-field input:focus + label,
body.theme-dark #post-form .title-field input:not(:placeholder-shown) + label {
  top:10px; translate:0 0; left:1.05rem; font-size:.63rem; letter-spacing:1.4px; font-weight:600;
  color:var(--color-accent);
}
body.theme-dark #post-form .title-field input:focus {
  outline:none;
  border-color:var(--color-accent);
  box-shadow:0 0 0 4px rgba(99,102,241,.28), 0 10px 32px -12px rgba(0,0,0,.85), 0 0 0 1px rgba(255,255,255,.08) inset;
  filter:brightness(1.06);
}
body.theme-dark #post-form .title-field .tf-accent-ring {
  position:absolute; inset:0; border-radius:inherit; padding:1px; pointer-events:none; opacity:.75; transition:.5s opacity;
  background:linear-gradient(130deg,var(--color-accent),var(--color-accent-alt));
  mask:linear-gradient(#000,#000) content-box, linear-gradient(#000,#000);
  -webkit-mask:linear-gradient(#000,#000) content-box, linear-gradient(#000,#000);
  mask-composite:exclude; -webkit-mask-composite:destination-out;
}
body.theme-dark #post-form .title-field input:focus ~ .tf-accent-ring { opacity:1; }
/* Icon pseudo */
body.theme-dark #post-form .title-field:before {
  content:"✎"; position:absolute; left:1.2rem; top:50%; translate:0 -50%; font-size:1.05rem; line-height:1; color:var(--color-accent); filter:drop-shadow(0 2px 4px rgba(0,0,0,.5)); pointer-events:none; transition:.4s transform,.4s opacity;
}
/* (Removed unused empty focus selectors for cleanliness) */

/* Reduce motion preference */
@media (prefers-reduced-motion:reduce){
  body.theme-dark #post-form .title-field input,
  body.theme-dark #post-form .title-field label { transition:none; }
}

/* File input custom button */
body.theme-dark #post-form .post-grid input[type=file] {
  position:relative;
  border:1px dashed rgba(99,102,241,.45);
  background:linear-gradient(150deg, rgba(34,43,55,.55), rgba(28,35,46,.45));
  color:var(--color-text-dim);
  padding:.85rem 1.1rem;
  font-size:.75rem;
  display:flex;
  align-items:center;
  gap:.75rem;
  border-radius:14px;
}
body.theme-dark #post-form .post-grid input[type=file]:hover {
  border-color:var(--color-accent);
  background:linear-gradient(150deg, rgba(34,43,55,.65), rgba(28,35,46,.52));
  color:var(--color-text);
}
body.theme-dark #post-form .post-grid input[type=file]::file-selector-button {
  margin-right:.9rem;
  border:none;
  background:linear-gradient(135deg,var(--color-accent),var(--color-accent-alt));
  color:#fff;
  font:600 .7rem 'Inter',system-ui,sans-serif;
  padding:.55rem .9rem;
  border-radius:10px;
  cursor:pointer;
  box-shadow:0 4px 12px -6px rgba(0,0,0,.6),0 0 0 1px rgba(255,255,255,.08) inset;
  transition:.3s filter,.3s transform;
}
body.theme-dark #post-form .post-grid input[type=file]::file-selector-button:hover { filter:brightness(1.08); transform:translateY(-2px); }
body.theme-dark #post-form .post-grid input[type=file]::file-selector-button:active { transform:translateY(0); }
